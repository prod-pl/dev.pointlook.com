#!/usr/bin/env node

/*global describe it before after beforeEach afterEach */
"use strict";
"use server";

require("c9/inline-mocha")(module, null, { globals: ["define"]});

var assert = require("assert-diff");
var nodeModules = require("./filter_node_modules");

describe(__filename, function() {

    it("should filter node modules for docker", function(done) {
        nodeModules(__dirname + "/../../..", "docker", "deploy", function(err, config) {
            assert(!err, err);
            
            assert(config.dependencies["optimist"]);
            assert(!config.dependencies["nodemailer-smtp-transport"]);
            done();
        });
    });
});